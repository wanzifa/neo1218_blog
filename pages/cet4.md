title: è®°çˆ¬å–CET4æŠ¥åç½‘ç«™çš„é‚£ä¸€å¤œ
date: 2015-09-26 20:54:03
tags: åšå®¢ å°è®°
img: http://7xj431.com1.z0.glb.clouddn.com/2kWVh9jrFWU.jpg

## é¦–å…ˆ:

    ä¸­ç§‹èŠ‚å¿«ä¹

## ç„¶å:

    æ²¡æœ‰äº†...

## å›å¯å®¤ä¹‹å‰åœ¨304çš„æ™šä¸Š
è½¬çœ¼é—´å°±å¤§äºŒäº†ï¼Œäºæ˜¯å°±è¦è€ƒå››çº§ï¼Œè€ƒå››çº§å°±è¦æŠ¥åï¼Œäºæ˜¯å»äº†æŠ¥åç½‘ç«™http://cet.tinyin.net/accuse.asp, ä¸Šä¼ äº†ç…§ç‰‡ï¼ŒæŠ¥äº†å,ç†è®ºä¸Šå°±ç»“æŸäº†ã€‚ä½†æ˜¯ï¼Œä¸­ç§‹è¦æ¥äº†ï¼Œæˆ‘è¦åšç‚¹ä»€ä¹ˆã€‚<br/>
å››çº§æŠ¥åç½‘ç«™ä¸ºäº†å…¬å¹³å…¬æ­£ï¼Œå°†æ¯ä¸ªæŠ¥åå­¦ç”Ÿçš„åŸºæœ¬ä¿¡æ¯(å§“åã€å­¦å·ã€å¤§å¤´ç…§ã€æŠ¥è€ƒç­‰çº§)æ”¾åœ¨äº†ç½‘ä¸Šï¼Œè¿™æ ·åŒå­¦é™¢ã€åŒå¹´çº§çš„åŒå­¦å°±å¯ä»¥è¿›è¡Œç›‘ç£ã€‚ä¸å¾—ä¸è¯´ï¼Œè¯ä»¶ç…§æ˜¯å¾ˆå¸å¼•äººçš„éƒ¨åˆ†ï¼Œäºæ˜¯æˆ‘å®¡æŸ¥äº†é¡µé¢å…ƒç´ ï¼Œå¸Œæœ›å¯ä»¥å‘ç°æ›´å¤šaã€‚

    <img width="120" border="0" height="160" src="photos/2014210761.jpg"></img>

<code>photos/2014210761.jpg</code>ï¼Œæœ‰æ„æ€ï¼Œçœ‹ä¸Šå»ä¼¼ä¹æ˜¯æŸä¸ªå­ç›®å½•ï¼Œäºæ˜¯æˆ‘å°è¯•åŠ ä¸Šäº†ä¸»æœºå

    http://cet.tinyin.net/photos/2014210761.jpg

äºæ˜¯æˆ‘å¯çˆ±çš„è¯ä»¶ç…§å‡ºç°äº†ã€‚ã€‚ã€‚è€Œä¸”ï¼Œç­‰æˆ‘ç™»å½•è¿‡æœŸåï¼Œæˆ‘ä¾ç„¶å¯ä»¥è®¿é—®è¿™ä¸ªurlçœ‹åˆ°å›¾ç‰‡(ç°åœ¨å°±å¯ä»¥è¯•è¯•)ï¼ï¼è¿™æ„å‘³ç€æˆ‘å¯ä»¥é€šè¿‡æ”¹å˜å­¦å·çœ‹åˆ°åŒå­¦çš„å¤§å¤´ç…§!ğŸ˜„

## ç„¶è€Œæˆ‘å¹¶ä¸çŸ¥é“å­¦å·
æ˜¯çš„ï¼Œæˆ‘çŸ¥é“æˆ‘çš„åŒå­¦çš„åå­—ï¼Œä½†æ˜¯è®°ä¸ä½å­¦å·ã€‚ä½†æ˜¯CET4æŠ¥åç½‘ç«™å·²ç»å°†å§“åå­¦å·ä¸€å¹¶å¥‰ä¸Šäº†ï¼Œæˆ‘è¦åšçš„å°±æ˜¯æŠ“å–å§“åå’Œå­¦å·ä¿¡æ¯ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯å†™å…¥æ–‡ä»¶ï¼Œå»ºç«‹å…³ç³»ï¼Œå°±åƒè¿™æ ·:

    å­¦ç”Ÿå­¦å·ï¼š2014210761 å­¦ç”Ÿå§“åï¼šæœ±æ‰¿æµ©
    å­¦ç”Ÿå­¦å·ï¼š2014210781 å­¦ç”Ÿå§“åï¼šæˆ‘å®¤å‹
    ......  ......  ....... .....  ......

## ä¹°äº†ä¸¤ç“¶å•¤é…’ğŸº ï¼Œå¼€çˆ¬! å½“ç„¶è¿˜æœ‰ httpfox
### æ¨¡æ‹Ÿç™»å½•
é¦–å…ˆå°±æ˜¯è¦ç™»å½•è¿›æŠ¥åç½‘ç«™ï¼Œæ‰å¯ä»¥è®¿é—®ä¿¡æ¯é¡µçš„urlã€‚æ‰“å¼€ httpfoxï¼Œç›‘å¬ç™»å½•è¿‡ç¨‹
![ç›‘å¬è¿‡ç¨‹](http://7xj431.com1.z0.glb.clouddn.com/å±å¹•å¿«ç…§%202015-09-27%20ä¸Šåˆ4.31.54.png) <br/>
![ç›¸å…³ä¿¡æ¯](http://7xj431.com1.z0.glb.clouddn.com/å±å¹•å¿«ç…§%202015-09-27%20ä¸Šåˆ4.34.51.png) <br/>
CET4ç½‘ç«™ä¸ºäº†é˜²æˆ‘è¿™ç§å¥½å¥‡å¿ƒå¾ˆå¼ºçš„äººè¿˜æ˜¯åšäº†ä¸€äº›å¤„ç†ï¼Œç™»å½•url<code>/login.asp</code>å®é™…ä¸Šæ˜¯ä¸€ä¸ªreferï¼ŒçœŸæ­£çš„ç™»å½•urlæ˜¯<code>http://cet.tinyin.net/reginfo.asp</code>ï¼Œæˆ‘è¦åšçš„ï¼Œå°±æ˜¯åˆ©ç”¨æˆ‘çš„ç”¨æˆ·åå’Œå¯†ç ç™»å…¥ç½‘ç«™ï¼Œè·å–cookieï¼Œç„¶ååˆ©ç”¨cookieè¿›è¡Œåç»­ç™»å½•ã€‚å½“ç„¶ï¼Œé¦–å…ˆéœ€è¦æŠŠæˆ‘è‡ªå·±å˜æˆæµè§ˆå™¨å•¦

    def __init__(self):
        self.user_agent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:42.0) Gecko/20100101 Firefox/42.0"
        self.headers = {
                'User-Agent':self.user_agent,
                'Referer':'http://cet.tinyin.net/login.asp',
                'Accept-encoding':'gzip'
        }
        self.postdata = urllib.urlencode({
                'stype':'#',
                'stuno':'2014214761',
                'stupwd':'å¯†ç å°±ä¸è¯´äº†'
        })

ç„¶åå°±æ˜¯ç™»å½•è·å–cookie

    def analog_login(self):
        """
        ç™»å½•cet4ç½‘ç«™ï¼Œè·å–cookieï¼Œå¹¶å°†
        cookieä¿å­˜è‡³æ–‡ä»¶
        """
        filename = 'cet4_cookie.txt'
        cookie = cookielib.MozillaCookieJar(filename)
        opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookie))

        login_url = 'http://cet.tinyin.net/reginfo.asp'
        request = urllib2.Request(login_url, self.postdata, self.headers)
        opener.open(request)
        cookie.save(ignore_discard=True, ignore_expires=True)

cookie get!!!

    # Netscape HTTP Cookie File
    # http://www.netscape.com/newsref/std/cookie_spec.html
    # This is a generated file!  Do not edit.

    cet.tinyin.net	FALSE	/	FALSE		ASPSESSlllllDAQBASRAC	LKNFEMDCDOLABMFPLLLLL

### è¯¥æ­£åˆ™è¡¨è¾¾å¼ä¸Šåœºäº†!
é¦–å…ˆå®éªŒä¸€ä¸‹ï¼Œcookieèƒ½å¦æ­£å¸¸ä½¿ç”¨, å°è¯•è®¿é—® http://cet.tinyin.net/accuse.asp é¡µé¢, cookieæ˜¯æ²¡é—®é¢˜ï¼Œä½†æ˜¯htmlå´æ˜¯ä¸­æ–‡ä¹±ç ï¼Œæ²¡å…³ç³»ï¼Œæ”¹æˆutf-8ï¼Œå°±è¡Œ

    html = response.read().decode('gbk').encode('utf-8â€™)

![html](http://7xj431.com1.z0.glb.clouddn.com/å±å¹•å¿«ç…§%202015-09-25%20ä¸‹åˆ11.48.57.png) <br/>
ç°åœ¨ï¼Œä¸€åˆ‡éƒ½è±ç„¶å¼€æœ—äº†ï¼Œæˆ‘åªéœ€è¦çˆ¬å–<td>æ ‡ç­¾ï¼Œå°†è·å–çš„å­¦å·å’Œå§“åå†™å…¥æ–‡ä»¶å°±è¡Œäº†ã€‚

    æ­£åˆ™è¡¨è¾¾å¼ parttern = re.compile('<td width=25% >(.*?)<br><br>(.*?)<br><br>', re.S)

[çˆ¬å–çš„ä¿¡æ¯æ–‡ä»¶](https://github.com/neo1218/CET4-photo/blob/master/stuinfo.txt) <br/>


### flask é ä½ äº†
æ¥ä¸‹æ¥å°±æ˜¯ç”¨flaskæ­ä¸€ä¸ªæœç´¢å¼•æ“äº†ã€‚åœ¨æ–‡å­—ç¼–ç è¿™ä¸€å—ç”¨äº†å¾ˆé•¿æ—¶é—´ï¼Œå› ä¸ºè¡¨å•çš„è¾“å…¥æ•°æ®ç¼–ç å’Œæ–‡ä»¶çš„ç¼–ç æ˜¯ä¸åŒ¹é…çš„ï¼Œç»è¿‡å‡ æ¬¡å®éªŒï¼Œæˆ‘å‘ç°éœ€è¦å°†è¡¨å•è¾“å…¥æ•°æ®decodeä¸ºæ±‰å­—ç¼–ç 

    name = form.name.data.decode('utf-8')

ç¼–ç çœŸå¤´ç—›ï¼ï¼çœ‹ä¸€ä¸‹è¿™ç¯‡å§http://dengshuan.me/misc/xi-shuo-bian-ma-yu-luan-ma.html <br/>


### okäº†
![æœ‰å›¾ä¸ºè¯](http://7xj431.com1.z0.glb.clouddn.com/å±å¹•å¿«ç…§%202015-09-27%20ä¸Šåˆ5.22.50.png) <br/>

## å¤‡æ³¨
#### å®é™…çš„è¿‡ç¨‹æ²¡æœ‰ä¸Šé¢è¯´çš„è¿™ä¹ˆçš„ä¸€æ°”å‘µæˆï¼Œä¸­é—´è¿˜ç¡äº†ä¸€è§‰ğŸ˜„ <br/>
#### ä¸¤ç“¶å•¤é…’æ²¡æœ‰å–å®Œ<br/>
#### ä¿¡æ¯éƒ½æ˜¯å…¬å¼€çš„ï¼Œåº”è¯¥æ²¡æœ‰ä¾µçŠ¯éšç§å§ğŸ˜” <br/>
#### å¼€å¿ƒå°±å¥½ğŸ˜„ <br/>
